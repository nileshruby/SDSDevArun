<div class="status-report col-md-12 col-lg-12 col-sm-12" contentHeight=".main-wrapper">
  <div class="grid-header">
    <h4 class="title">Status Report</h4>
  </div>

  <div class="search-panel">
    <form [formGroup]="searchForm" (ngSubmit)="onSearchFormSubmit($event)" *ngIf="searchForm">
      <div class="controls-panel">
        <button type="submit" class="btn btn-primary">
          <i class="fa fa-search"></i>
          Search
        </button>
        <button type="button" class="btn" (click)="onFormReset(datatable)">
          <i class="fa fa-recycle"></i>
          Reset
        </button>
      </div>

      <!--Always visible-->
      <div class="search-type-panel">
        <label>Search Type*</label>
        <div>
          <button type="button" class="btn btn-sm"
                  [ngClass]="{'btn-primary': searchType==='DATE'}"
                  (click)="searchType = 'DATE'">
            Date Range
          </button>
          <button type="button" class="btn btn-sm"
                  [ngClass]="{'btn-primary': searchType==='TIME'}"
                  (click)="searchType = 'TIME'">
            Time Range
          </button>
        </div>
      </div>

      <!--Always visible-->
      <div class="svc-id-panel">
        <label>Service ID*</label>
        <select formControlName="serviceId" *ngIf="!loadingSIDs">
          <option value="" selected="selected">SELECT</option>
          <option *ngFor="let SI of svcInstances"
                  [value]="SI.serviceId"
                  (change)="onTimeChange('start')">
            {{SI.serviceId}}
          </option>
        </select>
        <loading-anim *ngIf="loadingSIDs"></loading-anim>
      </div>

      <div [ngClass]="{'date-range-panel': (searchType==='DATE'), 'search-date-panel': (searchType!=='DATE')}">
        <!--Always visible-->
        <div>
          <label *ngIf="searchType==='DATE'">Start Date*</label>
          <label *ngIf="searchType!=='DATE'">Search Date*</label>
          <date-picker formControlName="startDate"
                       (onDateChanged)="onDateChange($event)">
          </date-picker>
        </div>

        <!--Visible for Date Range-->
        <div *ngIf="searchType==='DATE'">
          <label>End Date</label>
          <date-picker *ngIf="searchType==='DATE'"
                       formControlName="endDate"
                       (onDateChanged)="onDateChange($event)">
          </date-picker>
        </div>
      </div>

      <!--Visible for Date Range-->
      <div class="bin-pan-panel" *ngIf="searchType==='DATE'">
        <div>
          <label>BIN*</label>
          <input class="input-bin" formControlName="bin" maxlength="9"/>
        </div>

        <div>
          <label>PAN (Last 4)</label>
          <input class="input-pan" formControlName="pan" maxlength="4"/>
        </div>
      </div>

      <!--Visible for Time Range-->
      <div class="time-range-panel" *ngIf="searchType==='TIME'">
        <div>
          <label>Start Time*</label>
          <select formControlName="startTime"
                  (change)="onTimeChange('start')">
            <option value="" selected="selected">SELECT</option>
            <option *ngFor="let hour of startTimes"
                    [value]="hour">
              {{hour}}
            </option>
          </select>
        </div>

        <div>
          <label>End Time*</label>
          <select formControlName="endTime"
                  (change)="onTimeChange('end')">
            <option value="" selected="selected">SELECT</option>
            <option *ngFor="let hour of endTimes"
                    [value]="hour">
              {{hour}}
            </option>
          </select>
        </div>
      </div>
    </form>
  </div>

  <div contentHeight=".main-wrapper">
    <!--<div [style.height.px]="gridWrapperHeight">-->
    <!-- <ag-grid #grid
             [config]="gridOptions"
             [loading]="loading">
    </ag-grid> -->
    
    <div #statusReport >
      <p-table [value]="ptableList" [columns]="cols" #datatable dataKey="fiId" [responsive]="true" [resizableColumns]="true" exportFilename="status-report"  scrollHeight="70vh" [scrollable]="true" [paginator]="true" [rows]="17">
        <ng-template pTemplate="colgroup" let-tableColumns> 
          <colgroup> 
            <col *ngFor="let col of tableColumns" > 
          </colgroup> 
        </ng-template> 
          <ng-template pTemplate="header" let-columns>
              <tr>
                  <th pResizableColumn *ngFor="let col of columns" [style.width]="col.width">
                      {{col.header}}
                      <i class="pi pi-bars br-align"></i>
                  </th>
              </tr>
          </ng-template>
          <ng-template pTemplate="body" let-ptableList>
              <tr>
                  <td class="ui-resizable-column">{{ptableList.id}}</td>
                  <td class="ui-resizable-column">{{ptableList.text}}</td>
                  <td class="ui-resizable-column">{{ptableList.timeStamp}}</td>
              </tr>
          </ng-template>      
      </p-table> 
    </div>
  </div>
</div>
